@model IServiceManager;

@{
    #region set limits of number inputs
    var minYearValue = 1900;
    var minStockValue = 0;
    var minSoldValue = 0; 
    var minRentedValue = 0; 
    var maxYearValue = 2099;
    var maxStockValue = 5000;
    var maxSoldValue = 5000;
    var maxRentedValue = 5000;
    #endregion
}

<link rel="stylesheet" href="~/css/miar_machine.css"/>


<div class="form-w3layouts">
    <div class="row">
        <div class="col-lg-12">    
            <section class="panel">
                <header class="panel-heading"></header>
                <div class="panel-body">
                    @*machine image and video*@
                    <div style="text-align:center">
                        <video id="vid_machine" hidden>
                            <source id="src_machine"/>
                        </video>
                        @*message label*@
                        <div style="margin:30px 0px" hidden>
                            <spn id="spn_fileStatus"></spn>
                        </div>
                    </div>
                    @*image and video buttons*@
                    <div style="text-align:center">
                        <button id="btn_showImage" type="button" style="color:yellow" class="btn btn_imageAndVideo"></button>
                        <button id="btn_showVideo" type="button" class="btn btn_imageAndVideo"></button>
                    </div>
                
                    <form>
                        <div id="div_form" class="form-horizontal bucket-form"> 
                            @{
                                #region add image, video and pdf inputs
                                var fileInputInfos = new string[][]
                                {
                                    new string[] { "div_imageInput", "inpt_chooseImage",  "inpt_image", "image/*"},
                                    new string[] { "div_videoInput", "inpt_chooseVideo",  "inpt_video",  "video/*"},
                                    new string[] { "div_pdfInput", "inpt_choosePdf",  "inpt_pdf",  "application/pdf"}
                                };

                                foreach(var fileInputInput in fileInputInfos)
                                {
                                    <div id="@fileInputInput[0]" class="form-group">
                                        <label class="col-sm-3 control-label"></label>
                                        <div class="col-sm-6">
                                            <input id="@fileInputInput[1]"  type="text"  class="form-control  form_file_input"  readonly/>
                                            <span id="spn_help_@fileInputInput[1]" class="help-block"></span>
                                            <div hidden>
                                                <input id="@fileInputInput[2]"  type="file"  class=""  accept="@fileInputInput[3]">
                                            </div>
                                        </div>
                                    </div>
                                }
                                #endregion
                            }
                            @{
                                #region add mainCategory and subCategory select
                                var selectTypes = new string[] { "mainCategory", "subCategory"};

                                foreach(var selectType in selectTypes)
                                {
                                    <div id="div_@selectType" class="form-group">
                                        <label class="col-sm-3 control-label"></label>
                                        <div class="col-sm-6">
                                            <select id="slct_@selectType" class="form-control m-bot15"></select>
                                            <span id="spn_help_slct_@selectType" class="help-block"></span>
                                        </div>
                                    </div>
                                }
                                #endregion
                            }
                            @*model*@
                            <div id="div_model" class="form-group">
                                <label class="col-sm-3 control-label"></label>
                                <div class="col-sm-6">
                                    <input id="inpt_model" type="text" class="form-control" required>
                                    <span id="spn_help_inpt_model" class="help-block"></span>
                                </div>
                            </div>
                            @*brand*@
                            <div id="div_brand" class="form-group">
                                <label class="col-sm-3 control-label"></label>
                                <div class="col-sm-6">
                                    <input id="inpt_brand" type="text" class="form-control" required>
                                    <span id="spn_help_inpt_brand" class="help-block"></span>
                                </div>
                            </div>
                            @*year*@
                            <div id="div_year" class="form-group">
                                <label class="col-sm-3 control-label"></label>
                                <div class="col-sm-6">
                                    <input id="inpt_year" type="number" class="form-control" min=@minYearValue max=@maxYearValue required>
                                    <span id="spn_help_inpt_year" class="help-block"></span>
                                </div>
                            </div>
                            @*stock*@
                            <div id="div_stock" class="form-group">
                                <label class="col-sm-3 control-label"></label>
                                <div class="col-sm-6">
                                    <input id="inpt_stock" type="number" class="form-control" min=@minStockValue max=@maxStockValue required>
                                    <span id="spn_help_inpt_stock" class="help-block"></span>
                                </div>
                            </div>
                            @*sold*@
                            <div id="div_sold" class="form-group">
                                <label class="col-sm-3 control-label"></label>
                                <div class="col-sm-6">
                                    <input id="inpt_sold" type="number" class="form-control" min=@minSoldValue max=@maxSoldValue required>
                                    <span id="spn_help_inpt_sold" class="help-block"></span>
                                </div>
                            </div>
                            @*rented*@
                            <div id="div_rented" class="form-group">
                                <label class="col-sm-3 control-label"></label>
                                <div class="col-sm-6">
                                    <input id="inpt_rented" type="number" class="form-control" min=@minRentedValue max=@maxRentedValue required>
                                    <span id="spn_help_inpt_rented" class="help-block"></span>
                                </div>
                            </div>
                            @*handStatus*@
                            <div id="div_handStatus" class="form-group">
                                <label class="col-sm-3 control-label"></label>
                                <div class="col-sm-6">
                                    <div class="radio">
                                        <label style="margin-right:10px">
                                            <input type="radio" name="handStatus">
                                        </label>
                                        <label>
                                            <input type="radio" name="handStatus">
                                        </label>
                                    </div>
                                </div>
                            </div>
                            @*description*@
                            <div id="div_descriptions" class="form-group">
                                <label class="col-sm-3 control-label">
                                    <div class="input-group m-bot15">
                                        <div class="input-group-btn">
                                            <button id="btn_descriptions" style="background-color:darkblue; color:red" tabindex="-1" class="btn btn-info" type="button">
                                                <b></b>
                                            </button>
                                            <button tabindex="-1" style="background-color: darkblue;" data-toggle="dropdown" class="btn btn-info dropdown-toggle" type="button">
                                                <span class="caret"></span>
                                            </button>
                                            <ul id="ul_descriptions"  role="menu" class="dropdown-menu pull-right" style="text-align:center">
                                            </ul>
                                        </div>
                                    </div>
                                </label>
                                <div class="col-sm-6">
                                    <textarea id="txt_descriptions"  style="resize:none"  type="text"  class="form-control"  rows="10"  required></textarea>
                                </div>
                            </div>
                        </div>
                    </form>

                    @*save button*@
                    <div style="text-align:center">
                        <button id="btn_save" type="button" class="btn btn-danger" style="background-color: darkblue"></button>
                        <div>
                            <p id="p_resultLabel"></p>
                            <img id="img_loading" src="~/images/loading.gif" style="width:40px; height:40px" hidden/>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>


<script>
    const path_imageFolderAfterWwwroot = "images\\machines";
    const path_videoFolderAfterWwwroot = "videos\\machines";
    const path_pdfFolderAfterWwwroot = "pdfs";   
    const langPack_panelTitle = {
        "TR": "YENİ MAKİNE OLUŞTUR",
        "EN": "CREATE NEW MACHINE"
    }
    const successMessagesByLanguages = {
        "TR": {
            "saveSuccessful": "başarıyla kaydedildi",
        },
        "EN":{
            "saveSuccessful": "saved with successful"
        }
    }
    const errorMessagesByLanguages = {
        "TR":{
            "pdfReadingError": "pdf yüklenirken bir hata oluştu.",
            "descriptionNotEntered": "açıklama girilmedi",
            "imageSizeOverflow": "resim boyutu en fazla 20mb olabilir",
            "videoSizeOverflow": "video boyutu en fazla 20mb olabilir",
            "pdfSizeOverflow": "pdf boyutu en fazla 20mb olabilir",
            "unsuccessfulCreate": "makine oluşturulurken bir hata oluştu",
            "unsuccessfulImageUpload": "resim yüklenirken bir hata oluştu",
            "unsuccessfulVideoUpload": "video yüklenirken bir hata oluştu",
            "unsuccessfulPdfUpload": "pdf yüklenirken bir hata oluştu"
        },
        "EN":{
            "pdfReadingError": "an error occured when pdf uploading",
            "descriptionNotEntered": "description not entered",
            "imageSizeOverflow": "image size can be max 20mb",
            "videoSizeOverflow": "video size can be max 20mb",
            "pdfSizeOverflow": "pdf size can be max 20mb",
            "unsuccessfulCreate": "an error occured when machine creating",
            "unsuccessfulImageUpload": "an error occured when image uploading",
            "unsuccessfulVideoUpload": "an error occured when video uploading",
            "unsuccessfulPdfUpload": "an error occured when pdf uploading",
        }
    }
    
    
    // for "miar_machine.js" + "miar_machine_create"
    const vid_machine = $("#vid_machine");
    const src_machine = $("#src_machine");
    const spn_resultLabel_id = "p_resultLabel";
    const spn_resultLabel = $("#" + spn_resultLabel_id);
    const spn_fileStatus = $("#spn_fileStatus");
    const btn_showImage = $("#btn_showImage");
    const btn_showVideo = $("#btn_showVideo");
    const btn_back = $("#btn_back");
    const inpt_image = $("#inpt_image");
    const inpt_video = $("#inpt_video");
    const inpt_pdf = $("#inpt_pdf");
    const inpt_chooseImage = $("#inpt_chooseImage");
    const inpt_chooseVideo = $("#inpt_chooseVideo");
    const inpt_choosePdf = $("#inpt_choosePdf");
    const img_loading = $("#img_loading");
    const div_backButton = $("#div_backButton");
    const div_panelTitle = $("#div_panelTitle");
    const imageSizeLimitInMb = 20;
    const videoSizeLimitInMb = 20;
    const pdfSizeLimitInMb = 20;
</script>


<script type="module" src="~/js/miar_machine.js"></script>
<script type="module"  src="~/js/miar_machine.create.js"></script>